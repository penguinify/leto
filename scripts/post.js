(()=>{"use strict";function e(e){const n=(new Date).toISOString();console.log(`[${n}] [leto]`,e)}function n(n,t){e(`Sending IPC Message: ${n} with data: ${JSON.stringify(t)}`),window.ipc.postMessage(JSON.stringify({id:n,...t}))}window.__LETO__.logMessage=e,window.__LETO__.logError=function(e){const n=(new Date).toISOString();console.error(`[${n}] [leto] Error: ${e}`)};const t=document.cookie.split("; ").find(e=>e.startsWith("zoomLevel="));let o=t?parseFloat(t.split("=")[1]):1;1!==o&&n("zoom",{level:o}),e(`Zoom level initialized to ${o}`),document.body.addEventListener("keydown",e=>{if(e.metaKey&&"+"===e.key)o=Math.min(3,o+.1);else if(e.metaKey&&"-"===e.key)o=Math.max(.1,o-.1);else{if(!e.metaKey||"="!==e.key)return;o=1}n("zoom",{level:o}),document.cookie=`zoomLevel=${o}; path=/; max-age=31536000`,e.preventDefault()}),document.body.addEventListener("mousedown",e=>{e.y<40&&0===e.button&&n("drag_window",{})}),function(){const e=document.createElement("style");e.textContent="\n           @keyframes introanim {\n        0% {\n            opacity: 0;\n            transform: translate(-150%, -80%) rotate(-45deg);\n            filter: blur(10px);\n        }\n\n        30% {\n            transform: translate(20%, 20%) rotate(15deg);\n        }\n\n        60% {\n            transform: translate(-5%, -5%) rotate(-4deg);\n        }\n\n        100% {\n            filter: none;\n            transform: translate(0, 0) rotate(0deg);\n            opacity: 1;\n        }\n    }    ",document.head.appendChild(e);const n=document.createElement("div");n.style.cssText="\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        z-index: 9999;\n        background: black;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        opacity: 1;\n    ";const t=document.createElement("div");function o(e,n=0){const t=document.createElement("p");return t.innerText=e,t.style.cssText=`\n            animation: introanim 1.8s ease-in-out forwards;\n            opacity: 0;\n            ${n?`animation-delay: ${n}s;`:""}\n        `,t}t.style.cssText="\n        font-size: 8em;\n        color: white;\n        z-index: 10000;\n        display: flex;\n        font-family: 'Times New Roman', Times, serif;\n    ",t.appendChild(o("l",.2)),t.appendChild(o("e",.3)),t.appendChild(o("t",.4)),t.appendChild(o("o",.5));const i=document.createElement("p");i.innerText="@penguinify",i.style.cssText="\n        position: absolute;\n        bottom: 10px;\n        right: 10px;\n        color: white;\n        font-size: 1em;\n        opacity: 0.5;\n    ",n.appendChild(i),n.appendChild(t),document.body.appendChild(n),n.animate([{opacity:1},{opacity:0}],{duration:1e3,delay:1e3,fill:"forwards",easing:"ease-in-out"}),setTimeout(()=>{n.remove()},2500)}(),e("Intro animation displayed."),window.__LETO__.nativeFetch=window.fetch,window.__LETO__.callbacks={},e("Injection Proxy Extension"),window.__LETO__.fetch=async(e,t={})=>{if(e.toString().match(/https?:\/\/(?:[a-z]+\.)?(?:discord\.com|discordapp\.com)(?:\/.*)?/g)||e.toString().startsWith("ipc://")||e.toString().startsWith("/"))return e.toString().match(/\/api\/v.*\/(science|track)/g)?void console.log(`[Fetch Proxy] Blocked URL: ${e}`):window.nativeFetch(e,t);if(t&&t.body){const e="string"==typeof t.body?JSON.parse(t.body):t.body;t.body=JSON.stringify({...e,__leto_injected:!0})}if(t&&t.headers){const e={};for(const[n,o]of Object.entries(t.headers))e[n]=o;t.headers=e}return t={method:t.method||"GET",headers:t.headers||{},body:t.body||null},new Promise((o,i)=>{const a=Math.random().toString(36).substr(2,9);window.__LETO__.callbacks=window.__LETO__.callbacks||{},window.__LETO__.callbacks[a]={resolve:o,reject:i},n("fetch",{url:e,options:t,req_id:a})})},window.__LETO__.handleFetchResponse=(e,n,t)=>{const o=window.__LETO__.callbacks[e];if(o){if(n){const e=new Response(t.body,{status:t.status,headers:t.headers});o.resolve(e)}else o.reject(t);delete window.__LETO__.callbacks[e]}},Object.defineProperty(window,"fetch",{value:window.__LETO__.fetch,writable:!1,configurable:!1})})();